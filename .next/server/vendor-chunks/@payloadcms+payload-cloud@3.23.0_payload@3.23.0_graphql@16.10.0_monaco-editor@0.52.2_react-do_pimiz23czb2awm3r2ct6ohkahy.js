"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy";
exports.ids = ["vendor-chunks/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/email.js":
/*!**********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/email.js ***!
  \**********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   payloadCloudEmail: () => (/* binding */ payloadCloudEmail)\n/* harmony export */ });\n/* harmony import */ var _payloadcms_email_nodemailer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @payloadcms/email-nodemailer */ \"(rsc)/./node_modules/.pnpm/@payloadcms+email-nodemailer@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react_b6iaemxnd3yguxbxoh5fucmz7m/node_modules/@payloadcms/email-nodemailer/dist/index.js\");\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! nodemailer */ \"(rsc)/./node_modules/.pnpm/nodemailer@6.9.16/node_modules/nodemailer/lib/nodemailer.js\");\n\n\nconst payloadCloudEmail = async (args)=>{\n    if (process.env.PAYLOAD_CLOUD !== 'true' || !args) {\n        return undefined;\n    }\n    if (!args.apiKey) {\n        throw new Error('apiKey must be provided to use Payload Cloud Email');\n    }\n    if (!args.defaultDomain) {\n        throw new Error('defaultDomain must be provided to use Payload Cloud Email');\n    }\n    // Check if already has email configuration\n    if (args.config.email) {\n        // eslint-disable-next-line no-console\n        console.log('Payload Cloud Email is enabled but email configuration is already provided in Payload config. If this is intentional, set `email: false` in the Payload Cloud plugin options.');\n        return args.config.email;\n    }\n    const { apiKey, defaultDomain, skipVerify } = args;\n    const customDomainEnvs = Object.keys(process.env).filter((e)=>e.startsWith('PAYLOAD_CLOUD_EMAIL_DOMAIN_') && !e.endsWith('API_KEY'));\n    const customDomains = customDomainEnvs.map((e)=>process.env[e]).filter(Boolean);\n    if (customDomains.length) {\n        // eslint-disable-next-line no-console\n        console.log(`Configuring Payload Cloud Email for ${[\n            defaultDomain,\n            ...customDomains || []\n        ].join(', ')}`);\n    }\n    const defaultFromName = args.defaultFromName || 'Payload CMS';\n    const defaultFromAddress = args.defaultFromAddress || `cms@${customDomains.length ? customDomains[0] : defaultDomain}`;\n    const emailAdapter = await (0,_payloadcms_email_nodemailer__WEBPACK_IMPORTED_MODULE_0__.nodemailerAdapter)({\n        defaultFromAddress,\n        defaultFromName,\n        skipVerify,\n        transport: nodemailer__WEBPACK_IMPORTED_MODULE_1__.createTransport({\n            auth: {\n                pass: apiKey,\n                user: 'resend'\n            },\n            host: 'smtp.resend.com',\n            port: 465,\n            secure: true\n        })\n    });\n    return emailAdapter;\n};\n\n//# sourceMappingURL=email.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjIzLjBfcGF5bG9hZEAzLjIzLjBfZ3JhcGhxbEAxNi4xMC4wX21vbmFjby1lZGl0b3JAMC41Mi4yX3JlYWN0LWRvX3BpbWl6MjNjemIyYXdtM3IyY3Q2b2hrYWh5L25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3QvZW1haWwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWlFO0FBQzdCO0FBQzdCO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxvQ0FBb0M7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQ7QUFDM0Q7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsaUVBQWlFLHdEQUF3RDtBQUN6SCwrQkFBK0IsK0VBQWlCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix1REFBMEI7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL3Rvc2gvRG9jdW1lbnRzL1BsYXRmb3JtSU8vUHJvamVjdHMvc3RyYXBpNS9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjIzLjBfcGF5bG9hZEAzLjIzLjBfZ3JhcGhxbEAxNi4xMC4wX21vbmFjby1lZGl0b3JAMC41Mi4yX3JlYWN0LWRvX3BpbWl6MjNjemIyYXdtM3IyY3Q2b2hrYWh5L25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3QvZW1haWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbm9kZW1haWxlckFkYXB0ZXIgfSBmcm9tICdAcGF5bG9hZGNtcy9lbWFpbC1ub2RlbWFpbGVyJztcbmltcG9ydCBub2RlbWFpbGVyIGZyb20gJ25vZGVtYWlsZXInO1xuZXhwb3J0IGNvbnN0IHBheWxvYWRDbG91ZEVtYWlsID0gYXN5bmMgKGFyZ3MpPT57XG4gICAgaWYgKHByb2Nlc3MuZW52LlBBWUxPQURfQ0xPVUQgIT09ICd0cnVlJyB8fCAhYXJncykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoIWFyZ3MuYXBpS2V5KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignYXBpS2V5IG11c3QgYmUgcHJvdmlkZWQgdG8gdXNlIFBheWxvYWQgQ2xvdWQgRW1haWwnKTtcbiAgICB9XG4gICAgaWYgKCFhcmdzLmRlZmF1bHREb21haW4pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdkZWZhdWx0RG9tYWluIG11c3QgYmUgcHJvdmlkZWQgdG8gdXNlIFBheWxvYWQgQ2xvdWQgRW1haWwnKTtcbiAgICB9XG4gICAgLy8gQ2hlY2sgaWYgYWxyZWFkeSBoYXMgZW1haWwgY29uZmlndXJhdGlvblxuICAgIGlmIChhcmdzLmNvbmZpZy5lbWFpbCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICBjb25zb2xlLmxvZygnUGF5bG9hZCBDbG91ZCBFbWFpbCBpcyBlbmFibGVkIGJ1dCBlbWFpbCBjb25maWd1cmF0aW9uIGlzIGFscmVhZHkgcHJvdmlkZWQgaW4gUGF5bG9hZCBjb25maWcuIElmIHRoaXMgaXMgaW50ZW50aW9uYWwsIHNldCBgZW1haWw6IGZhbHNlYCBpbiB0aGUgUGF5bG9hZCBDbG91ZCBwbHVnaW4gb3B0aW9ucy4nKTtcbiAgICAgICAgcmV0dXJuIGFyZ3MuY29uZmlnLmVtYWlsO1xuICAgIH1cbiAgICBjb25zdCB7IGFwaUtleSwgZGVmYXVsdERvbWFpbiwgc2tpcFZlcmlmeSB9ID0gYXJncztcbiAgICBjb25zdCBjdXN0b21Eb21haW5FbnZzID0gT2JqZWN0LmtleXMocHJvY2Vzcy5lbnYpLmZpbHRlcigoZSk9PmUuc3RhcnRzV2l0aCgnUEFZTE9BRF9DTE9VRF9FTUFJTF9ET01BSU5fJykgJiYgIWUuZW5kc1dpdGgoJ0FQSV9LRVknKSk7XG4gICAgY29uc3QgY3VzdG9tRG9tYWlucyA9IGN1c3RvbURvbWFpbkVudnMubWFwKChlKT0+cHJvY2Vzcy5lbnZbZV0pLmZpbHRlcihCb29sZWFuKTtcbiAgICBpZiAoY3VzdG9tRG9tYWlucy5sZW5ndGgpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgY29uc29sZS5sb2coYENvbmZpZ3VyaW5nIFBheWxvYWQgQ2xvdWQgRW1haWwgZm9yICR7W1xuICAgICAgICAgICAgZGVmYXVsdERvbWFpbixcbiAgICAgICAgICAgIC4uLmN1c3RvbURvbWFpbnMgfHwgW11cbiAgICAgICAgXS5qb2luKCcsICcpfWApO1xuICAgIH1cbiAgICBjb25zdCBkZWZhdWx0RnJvbU5hbWUgPSBhcmdzLmRlZmF1bHRGcm9tTmFtZSB8fCAnUGF5bG9hZCBDTVMnO1xuICAgIGNvbnN0IGRlZmF1bHRGcm9tQWRkcmVzcyA9IGFyZ3MuZGVmYXVsdEZyb21BZGRyZXNzIHx8IGBjbXNAJHtjdXN0b21Eb21haW5zLmxlbmd0aCA/IGN1c3RvbURvbWFpbnNbMF0gOiBkZWZhdWx0RG9tYWlufWA7XG4gICAgY29uc3QgZW1haWxBZGFwdGVyID0gYXdhaXQgbm9kZW1haWxlckFkYXB0ZXIoe1xuICAgICAgICBkZWZhdWx0RnJvbUFkZHJlc3MsXG4gICAgICAgIGRlZmF1bHRGcm9tTmFtZSxcbiAgICAgICAgc2tpcFZlcmlmeSxcbiAgICAgICAgdHJhbnNwb3J0OiBub2RlbWFpbGVyLmNyZWF0ZVRyYW5zcG9ydCh7XG4gICAgICAgICAgICBhdXRoOiB7XG4gICAgICAgICAgICAgICAgcGFzczogYXBpS2V5LFxuICAgICAgICAgICAgICAgIHVzZXI6ICdyZXNlbmQnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaG9zdDogJ3NtdHAucmVzZW5kLmNvbScsXG4gICAgICAgICAgICBwb3J0OiA0NjUsXG4gICAgICAgICAgICBzZWN1cmU6IHRydWVcbiAgICAgICAgfSlcbiAgICB9KTtcbiAgICByZXR1cm4gZW1haWxBZGFwdGVyO1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW1haWwuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/email.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/hooks/afterDelete.js":
/*!**********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/hooks/afterDelete.js ***!
  \**********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAfterDeleteHook: () => (/* binding */ getAfterDeleteHook)\n/* harmony export */ });\n/* harmony import */ var _utilities_createKey_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utilities/createKey.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/utilities/createKey.js\");\n/* harmony import */ var _utilities_getStorageClient_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utilities/getStorageClient.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/utilities/getStorageClient.js\");\n\n\nconst getAfterDeleteHook = ({ collection })=>{\n    return async ({ doc, req })=>{\n        try {\n            const { identityID, storageClient } = await (0,_utilities_getStorageClient_js__WEBPACK_IMPORTED_MODULE_1__.getStorageClient)();\n            const filesToDelete = [\n                doc.filename || '',\n                ...Object.values(doc?.sizes || []).map((resizedFileData)=>resizedFileData.filename).filter((filename)=>filename !== null)\n            ];\n            const promises = filesToDelete.map(async (filename)=>{\n                await storageClient.deleteObject({\n                    Bucket: process.env.PAYLOAD_CLOUD_BUCKET,\n                    Key: (0,_utilities_createKey_js__WEBPACK_IMPORTED_MODULE_0__.createKey)({\n                        collection: collection.slug,\n                        filename,\n                        identityID\n                    })\n                });\n            });\n            await Promise.all(promises);\n        } catch (err) {\n            req.payload.logger.error(`There was an error while deleting files corresponding to the ${collection.labels?.singular} with ID ${doc.id}:`);\n            req.payload.logger.error(err);\n        }\n        return doc;\n    };\n};\n\n//# sourceMappingURL=afterDelete.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjIzLjBfcGF5bG9hZEAzLjIzLjBfZ3JhcGhxbEAxNi4xMC4wX21vbmFjby1lZGl0b3JAMC41Mi4yX3JlYWN0LWRvX3BpbWl6MjNjemIyYXdtM3IyY3Q2b2hrYWh5L25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3QvaG9va3MvYWZ0ZXJEZWxldGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXNEO0FBQ2M7QUFDN0QsOEJBQThCLFlBQVk7QUFDakQsb0JBQW9CLFVBQVU7QUFDOUI7QUFDQSxvQkFBb0IsNEJBQTRCLFFBQVEsZ0ZBQWdCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGtFQUFTO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0EsVUFBVTtBQUNWLHFHQUFxRyw2QkFBNkIsVUFBVSxPQUFPO0FBQ25KO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy90b3NoL0RvY3VtZW50cy9QbGF0Zm9ybUlPL1Byb2plY3RzL3N0cmFwaTUvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK3BheWxvYWQtY2xvdWRAMy4yMy4wX3BheWxvYWRAMy4yMy4wX2dyYXBocWxAMTYuMTAuMF9tb25hY28tZWRpdG9yQDAuNTIuMl9yZWFjdC1kb19waW1pejIzY3piMmF3bTNyMmN0Nm9oa2FoeS9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvcGF5bG9hZC1jbG91ZC9kaXN0L2hvb2tzL2FmdGVyRGVsZXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUtleSB9IGZyb20gJy4uL3V0aWxpdGllcy9jcmVhdGVLZXkuanMnO1xuaW1wb3J0IHsgZ2V0U3RvcmFnZUNsaWVudCB9IGZyb20gJy4uL3V0aWxpdGllcy9nZXRTdG9yYWdlQ2xpZW50LmpzJztcbmV4cG9ydCBjb25zdCBnZXRBZnRlckRlbGV0ZUhvb2sgPSAoeyBjb2xsZWN0aW9uIH0pPT57XG4gICAgcmV0dXJuIGFzeW5jICh7IGRvYywgcmVxIH0pPT57XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IGlkZW50aXR5SUQsIHN0b3JhZ2VDbGllbnQgfSA9IGF3YWl0IGdldFN0b3JhZ2VDbGllbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVzVG9EZWxldGUgPSBbXG4gICAgICAgICAgICAgICAgZG9jLmZpbGVuYW1lIHx8ICcnLFxuICAgICAgICAgICAgICAgIC4uLk9iamVjdC52YWx1ZXMoZG9jPy5zaXplcyB8fCBbXSkubWFwKChyZXNpemVkRmlsZURhdGEpPT5yZXNpemVkRmlsZURhdGEuZmlsZW5hbWUpLmZpbHRlcigoZmlsZW5hbWUpPT5maWxlbmFtZSAhPT0gbnVsbClcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBjb25zdCBwcm9taXNlcyA9IGZpbGVzVG9EZWxldGUubWFwKGFzeW5jIChmaWxlbmFtZSk9PntcbiAgICAgICAgICAgICAgICBhd2FpdCBzdG9yYWdlQ2xpZW50LmRlbGV0ZU9iamVjdCh7XG4gICAgICAgICAgICAgICAgICAgIEJ1Y2tldDogcHJvY2Vzcy5lbnYuUEFZTE9BRF9DTE9VRF9CVUNLRVQsXG4gICAgICAgICAgICAgICAgICAgIEtleTogY3JlYXRlS2V5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb246IGNvbGxlY3Rpb24uc2x1ZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWRlbnRpdHlJRFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcmVxLnBheWxvYWQubG9nZ2VyLmVycm9yKGBUaGVyZSB3YXMgYW4gZXJyb3Igd2hpbGUgZGVsZXRpbmcgZmlsZXMgY29ycmVzcG9uZGluZyB0byB0aGUgJHtjb2xsZWN0aW9uLmxhYmVscz8uc2luZ3VsYXJ9IHdpdGggSUQgJHtkb2MuaWR9OmApO1xuICAgICAgICAgICAgcmVxLnBheWxvYWQubG9nZ2VyLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRvYztcbiAgICB9O1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWZ0ZXJEZWxldGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/hooks/afterDelete.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/hooks/beforeChange.js":
/*!***********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/hooks/beforeChange.js ***!
  \***********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getBeforeChangeHook: () => (/* binding */ getBeforeChangeHook)\n/* harmony export */ });\n/* harmony import */ var _aws_sdk_lib_storage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/lib-storage */ \"(rsc)/./node_modules/.pnpm/@aws-sdk+lib-storage@3.750.0_@aws-sdk+client-s3@3.750.0/node_modules/@aws-sdk/lib-storage/dist-es/index.js\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var _utilities_createKey_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utilities/createKey.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/utilities/createKey.js\");\n/* harmony import */ var _utilities_getIncomingFiles_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utilities/getIncomingFiles.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/utilities/getIncomingFiles.js\");\n/* harmony import */ var _utilities_getStorageClient_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utilities/getStorageClient.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/utilities/getStorageClient.js\");\n\n\n\n\n\nconst MB = 1024 * 1024;\nconst getBeforeChangeHook = ({ collection })=>async ({ data, req })=>{\n        try {\n            const files = (0,_utilities_getIncomingFiles_js__WEBPACK_IMPORTED_MODULE_3__.getIncomingFiles)({\n                data,\n                req\n            });\n            req.payload.logger.debug({\n                msg: `Preparing to upload ${files.length} files`\n            });\n            const { identityID, storageClient } = await (0,_utilities_getStorageClient_js__WEBPACK_IMPORTED_MODULE_4__.getStorageClient)();\n            const promises = files.map(async (file)=>{\n                const fileKey = file.filename;\n                req.payload.logger.debug({\n                    fileKey,\n                    msg: `File buffer length: ${file.buffer.length / MB}MB`,\n                    tempFilePath: file.tempFilePath ?? 'undefined'\n                });\n                const fileBufferOrStream = file.tempFilePath ? fs__WEBPACK_IMPORTED_MODULE_1__.createReadStream(file.tempFilePath) : file.buffer;\n                if (file.buffer.length > 0) {\n                    req.payload.logger.debug({\n                        fileKey,\n                        msg: `Uploading ${fileKey} from buffer. Size: ${file.buffer.length / MB}MB`\n                    });\n                    await storageClient.putObject({\n                        Body: fileBufferOrStream,\n                        Bucket: process.env.PAYLOAD_CLOUD_BUCKET,\n                        ContentType: file.mimeType,\n                        Key: (0,_utilities_createKey_js__WEBPACK_IMPORTED_MODULE_2__.createKey)({\n                            collection: collection.slug,\n                            filename: fileKey,\n                            identityID\n                        })\n                    });\n                }\n                // This will buffer at max 4 * 5MB = 20MB. Default queueSize is 4 and default partSize is 5MB.\n                const parallelUploadS3 = new _aws_sdk_lib_storage__WEBPACK_IMPORTED_MODULE_0__.Upload({\n                    client: storageClient,\n                    params: {\n                        Body: fileBufferOrStream,\n                        Bucket: process.env.PAYLOAD_CLOUD_BUCKET,\n                        ContentType: file.mimeType,\n                        Key: (0,_utilities_createKey_js__WEBPACK_IMPORTED_MODULE_2__.createKey)({\n                            collection: collection.slug,\n                            filename: fileKey,\n                            identityID\n                        })\n                    }\n                });\n                parallelUploadS3.on('httpUploadProgress', (progress)=>{\n                    if (progress.total) {\n                        req.payload.logger.debug({\n                            fileKey,\n                            msg: `Uploaded part ${progress.part} - ${(progress.loaded || 0) / MB}MB out of ${(progress.total || 0) / MB}MB`\n                        });\n                    }\n                });\n                await parallelUploadS3.done();\n            });\n            await Promise.all(promises);\n        } catch (err) {\n            req.payload.logger.error(`There was an error while uploading files corresponding to the collection ${collection.slug} with filename ${data.filename}:`);\n            req.payload.logger.error(err);\n        }\n        return data;\n    };\n\n//# sourceMappingURL=beforeChange.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjIzLjBfcGF5bG9hZEAzLjIzLjBfZ3JhcGhxbEAxNi4xMC4wX21vbmFjby1lZGl0b3JAMC41Mi4yX3JlYWN0LWRvX3BpbWl6MjNjemIyYXdtM3IyY3Q2b2hrYWh5L25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3QvaG9va3MvYmVmb3JlQ2hhbmdlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUE4QztBQUMxQjtBQUNrQztBQUNjO0FBQ0E7QUFDcEU7QUFDTywrQkFBK0IsWUFBWSxZQUFZLFdBQVc7QUFDekU7QUFDQSwwQkFBMEIsZ0ZBQWdCO0FBQzFDO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSw0Q0FBNEMsY0FBYztBQUMxRCxhQUFhO0FBQ2Isb0JBQW9CLDRCQUE0QixRQUFRLGdGQUFnQjtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCx3QkFBd0I7QUFDeEU7QUFDQSxpQkFBaUI7QUFDakIsK0RBQStELGdEQUFtQjtBQUNsRjtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsU0FBUyxxQkFBcUIsd0JBQXdCO0FBQ2hHLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixrRUFBUztBQUN0QztBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSw2Q0FBNkMsd0RBQU07QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixrRUFBUztBQUN0QztBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsZUFBZSxJQUFJLDRCQUE0QixZQUFZLDJCQUEyQjtBQUN4SSx5QkFBeUI7QUFDekI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhO0FBQ2I7QUFDQSxVQUFVO0FBQ1YsaUhBQWlILGlCQUFpQixnQkFBZ0IsY0FBYztBQUNoSztBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL3Rvc2gvRG9jdW1lbnRzL1BsYXRmb3JtSU8vUHJvamVjdHMvc3RyYXBpNS9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjIzLjBfcGF5bG9hZEAzLjIzLjBfZ3JhcGhxbEAxNi4xMC4wX21vbmFjby1lZGl0b3JAMC41Mi4yX3JlYWN0LWRvX3BpbWl6MjNjemIyYXdtM3IyY3Q2b2hrYWh5L25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3QvaG9va3MvYmVmb3JlQ2hhbmdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFVwbG9hZCB9IGZyb20gJ0Bhd3Mtc2RrL2xpYi1zdG9yYWdlJztcbmltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgeyBjcmVhdGVLZXkgfSBmcm9tICcuLi91dGlsaXRpZXMvY3JlYXRlS2V5LmpzJztcbmltcG9ydCB7IGdldEluY29taW5nRmlsZXMgfSBmcm9tICcuLi91dGlsaXRpZXMvZ2V0SW5jb21pbmdGaWxlcy5qcyc7XG5pbXBvcnQgeyBnZXRTdG9yYWdlQ2xpZW50IH0gZnJvbSAnLi4vdXRpbGl0aWVzL2dldFN0b3JhZ2VDbGllbnQuanMnO1xuY29uc3QgTUIgPSAxMDI0ICogMTAyNDtcbmV4cG9ydCBjb25zdCBnZXRCZWZvcmVDaGFuZ2VIb29rID0gKHsgY29sbGVjdGlvbiB9KT0+YXN5bmMgKHsgZGF0YSwgcmVxIH0pPT57XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBmaWxlcyA9IGdldEluY29taW5nRmlsZXMoe1xuICAgICAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICAgICAgcmVxXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlcS5wYXlsb2FkLmxvZ2dlci5kZWJ1Zyh7XG4gICAgICAgICAgICAgICAgbXNnOiBgUHJlcGFyaW5nIHRvIHVwbG9hZCAke2ZpbGVzLmxlbmd0aH0gZmlsZXNgXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHsgaWRlbnRpdHlJRCwgc3RvcmFnZUNsaWVudCB9ID0gYXdhaXQgZ2V0U3RvcmFnZUNsaWVudCgpO1xuICAgICAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBmaWxlcy5tYXAoYXN5bmMgKGZpbGUpPT57XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZUtleSA9IGZpbGUuZmlsZW5hbWU7XG4gICAgICAgICAgICAgICAgcmVxLnBheWxvYWQubG9nZ2VyLmRlYnVnKHtcbiAgICAgICAgICAgICAgICAgICAgZmlsZUtleSxcbiAgICAgICAgICAgICAgICAgICAgbXNnOiBgRmlsZSBidWZmZXIgbGVuZ3RoOiAke2ZpbGUuYnVmZmVyLmxlbmd0aCAvIE1CfU1CYCxcbiAgICAgICAgICAgICAgICAgICAgdGVtcEZpbGVQYXRoOiBmaWxlLnRlbXBGaWxlUGF0aCA/PyAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVCdWZmZXJPclN0cmVhbSA9IGZpbGUudGVtcEZpbGVQYXRoID8gZnMuY3JlYXRlUmVhZFN0cmVhbShmaWxlLnRlbXBGaWxlUGF0aCkgOiBmaWxlLmJ1ZmZlcjtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZS5idWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXEucGF5bG9hZC5sb2dnZXIuZGVidWcoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1zZzogYFVwbG9hZGluZyAke2ZpbGVLZXl9IGZyb20gYnVmZmVyLiBTaXplOiAke2ZpbGUuYnVmZmVyLmxlbmd0aCAvIE1CfU1CYFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc3RvcmFnZUNsaWVudC5wdXRPYmplY3Qoe1xuICAgICAgICAgICAgICAgICAgICAgICAgQm9keTogZmlsZUJ1ZmZlck9yU3RyZWFtLFxuICAgICAgICAgICAgICAgICAgICAgICAgQnVja2V0OiBwcm9jZXNzLmVudi5QQVlMT0FEX0NMT1VEX0JVQ0tFVCxcbiAgICAgICAgICAgICAgICAgICAgICAgIENvbnRlbnRUeXBlOiBmaWxlLm1pbWVUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgS2V5OiBjcmVhdGVLZXkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb246IGNvbGxlY3Rpb24uc2x1ZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogZmlsZUtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZGVudGl0eUlEXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gVGhpcyB3aWxsIGJ1ZmZlciBhdCBtYXggNCAqIDVNQiA9IDIwTUIuIERlZmF1bHQgcXVldWVTaXplIGlzIDQgYW5kIGRlZmF1bHQgcGFydFNpemUgaXMgNU1CLlxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFsbGVsVXBsb2FkUzMgPSBuZXcgVXBsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50OiBzdG9yYWdlQ2xpZW50LFxuICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEJvZHk6IGZpbGVCdWZmZXJPclN0cmVhbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIEJ1Y2tldDogcHJvY2Vzcy5lbnYuUEFZTE9BRF9DTE9VRF9CVUNLRVQsXG4gICAgICAgICAgICAgICAgICAgICAgICBDb250ZW50VHlwZTogZmlsZS5taW1lVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIEtleTogY3JlYXRlS2V5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uLnNsdWcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IGZpbGVLZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRlbnRpdHlJRFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHBhcmFsbGVsVXBsb2FkUzMub24oJ2h0dHBVcGxvYWRQcm9ncmVzcycsIChwcm9ncmVzcyk9PntcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzLnRvdGFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXEucGF5bG9hZC5sb2dnZXIuZGVidWcoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVLZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnOiBgVXBsb2FkZWQgcGFydCAke3Byb2dyZXNzLnBhcnR9IC0gJHsocHJvZ3Jlc3MubG9hZGVkIHx8IDApIC8gTUJ9TUIgb3V0IG9mICR7KHByb2dyZXNzLnRvdGFsIHx8IDApIC8gTUJ9TUJgXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGF3YWl0IHBhcmFsbGVsVXBsb2FkUzMuZG9uZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcmVxLnBheWxvYWQubG9nZ2VyLmVycm9yKGBUaGVyZSB3YXMgYW4gZXJyb3Igd2hpbGUgdXBsb2FkaW5nIGZpbGVzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGNvbGxlY3Rpb24gJHtjb2xsZWN0aW9uLnNsdWd9IHdpdGggZmlsZW5hbWUgJHtkYXRhLmZpbGVuYW1lfTpgKTtcbiAgICAgICAgICAgIHJlcS5wYXlsb2FkLmxvZ2dlci5lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJlZm9yZUNoYW5nZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/hooks/beforeChange.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/hooks/uploadCache.js":
/*!**********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/hooks/uploadCache.js ***!
  \**********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCacheUploadsAfterChangeHook: () => (/* binding */ getCacheUploadsAfterChangeHook),\n/* harmony export */   getCacheUploadsAfterDeleteHook: () => (/* binding */ getCacheUploadsAfterDeleteHook)\n/* harmony export */ });\nconst getCacheUploadsAfterChangeHook = ({ endpoint })=>({ doc, operation, req })=>{\n        if (!req || !process.env.PAYLOAD_CLOUD_CACHE_KEY) {\n            return doc;\n        }\n        // WARNING:\n        // TODO: Test this for 3.0\n        const { payloadAPI } = req;\n        if (payloadAPI !== 'local') {\n            if (operation === 'update') {\n                // Unawaited promise\n                void purge({\n                    doc,\n                    endpoint,\n                    operation,\n                    req\n                });\n            }\n        }\n        return doc;\n    };\nconst getCacheUploadsAfterDeleteHook = ({ endpoint })=>({ doc, req })=>{\n        if (!req || !process.env.PAYLOAD_CLOUD_CACHE_KEY) {\n            return doc;\n        }\n        const { payloadAPI } = req;\n        // WARNING:\n        // TODO: Test this for 3.0\n        if (payloadAPI !== 'local') {\n            // Unawaited promise\n            void purge({\n                doc,\n                endpoint,\n                operation: 'delete',\n                req\n            });\n        }\n        return doc;\n    };\nasync function purge({ doc, endpoint, operation, req }) {\n    const filePath = doc.url;\n    if (!filePath) {\n        req.payload.logger.error({\n            msg: 'No url found on doc',\n            project: {\n                id: process.env.PAYLOAD_CLOUD_PROJECT_ID\n            }\n        });\n        return;\n    }\n    const body = {\n        cacheKey: process.env.PAYLOAD_CLOUD_CACHE_KEY,\n        filepath: doc.url,\n        projectID: process.env.PAYLOAD_CLOUD_PROJECT_ID\n    };\n    req.payload.logger.debug({\n        filepath: doc.url,\n        msg: 'Attempting to purge cache',\n        operation,\n        project: {\n            id: process.env.PAYLOAD_CLOUD_PROJECT_ID\n        }\n    });\n    try {\n        const purgeRes = await fetch(`${endpoint}/api/purge-cache`, {\n            body: JSON.stringify({\n                ...body\n            }),\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            method: 'POST'\n        });\n        req.payload.logger.debug({\n            msg: 'Purge cache result',\n            operation,\n            statusCode: purgeRes.status\n        });\n    } catch (err) {\n        req.payload.logger.error({\n            body,\n            err,\n            msg: '/purge-cache call failed'\n        });\n    }\n}\n\n//# sourceMappingURL=uploadCache.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjIzLjBfcGF5bG9hZEAzLjIzLjBfZ3JhcGhxbEAxNi4xMC4wX21vbmFjby1lZGl0b3JAMC41Mi4yX3JlYWN0LWRvX3BpbWl6MjNjemIyYXdtM3IyY3Q2b2hrYWh5L25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3QvaG9va3MvdXBsb2FkQ2FjaGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBTywwQ0FBMEMsVUFBVSxNQUFNLHFCQUFxQjtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGFBQWE7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNPLDBDQUEwQyxVQUFVLE1BQU0sVUFBVTtBQUMzRTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsYUFBYTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLCtCQUErQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0Esd0NBQXdDLFNBQVM7QUFDakQ7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvdG9zaC9Eb2N1bWVudHMvUGxhdGZvcm1JTy9Qcm9qZWN0cy9zdHJhcGk1L25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytwYXlsb2FkLWNsb3VkQDMuMjMuMF9wYXlsb2FkQDMuMjMuMF9ncmFwaHFsQDE2LjEwLjBfbW9uYWNvLWVkaXRvckAwLjUyLjJfcmVhY3QtZG9fcGltaXoyM2N6YjJhd20zcjJjdDZvaGthaHkvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL3BheWxvYWQtY2xvdWQvZGlzdC9ob29rcy91cGxvYWRDYWNoZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgZ2V0Q2FjaGVVcGxvYWRzQWZ0ZXJDaGFuZ2VIb29rID0gKHsgZW5kcG9pbnQgfSk9Pih7IGRvYywgb3BlcmF0aW9uLCByZXEgfSk9PntcbiAgICAgICAgaWYgKCFyZXEgfHwgIXByb2Nlc3MuZW52LlBBWUxPQURfQ0xPVURfQ0FDSEVfS0VZKSB7XG4gICAgICAgICAgICByZXR1cm4gZG9jO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdBUk5JTkc6XG4gICAgICAgIC8vIFRPRE86IFRlc3QgdGhpcyBmb3IgMy4wXG4gICAgICAgIGNvbnN0IHsgcGF5bG9hZEFQSSB9ID0gcmVxO1xuICAgICAgICBpZiAocGF5bG9hZEFQSSAhPT0gJ2xvY2FsJykge1xuICAgICAgICAgICAgaWYgKG9wZXJhdGlvbiA9PT0gJ3VwZGF0ZScpIHtcbiAgICAgICAgICAgICAgICAvLyBVbmF3YWl0ZWQgcHJvbWlzZVxuICAgICAgICAgICAgICAgIHZvaWQgcHVyZ2Uoe1xuICAgICAgICAgICAgICAgICAgICBkb2MsXG4gICAgICAgICAgICAgICAgICAgIGVuZHBvaW50LFxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHJlcVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkb2M7XG4gICAgfTtcbmV4cG9ydCBjb25zdCBnZXRDYWNoZVVwbG9hZHNBZnRlckRlbGV0ZUhvb2sgPSAoeyBlbmRwb2ludCB9KT0+KHsgZG9jLCByZXEgfSk9PntcbiAgICAgICAgaWYgKCFyZXEgfHwgIXByb2Nlc3MuZW52LlBBWUxPQURfQ0xPVURfQ0FDSEVfS0VZKSB7XG4gICAgICAgICAgICByZXR1cm4gZG9jO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgcGF5bG9hZEFQSSB9ID0gcmVxO1xuICAgICAgICAvLyBXQVJOSU5HOlxuICAgICAgICAvLyBUT0RPOiBUZXN0IHRoaXMgZm9yIDMuMFxuICAgICAgICBpZiAocGF5bG9hZEFQSSAhPT0gJ2xvY2FsJykge1xuICAgICAgICAgICAgLy8gVW5hd2FpdGVkIHByb21pc2VcbiAgICAgICAgICAgIHZvaWQgcHVyZ2Uoe1xuICAgICAgICAgICAgICAgIGRvYyxcbiAgICAgICAgICAgICAgICBlbmRwb2ludCxcbiAgICAgICAgICAgICAgICBvcGVyYXRpb246ICdkZWxldGUnLFxuICAgICAgICAgICAgICAgIHJlcVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRvYztcbiAgICB9O1xuYXN5bmMgZnVuY3Rpb24gcHVyZ2UoeyBkb2MsIGVuZHBvaW50LCBvcGVyYXRpb24sIHJlcSB9KSB7XG4gICAgY29uc3QgZmlsZVBhdGggPSBkb2MudXJsO1xuICAgIGlmICghZmlsZVBhdGgpIHtcbiAgICAgICAgcmVxLnBheWxvYWQubG9nZ2VyLmVycm9yKHtcbiAgICAgICAgICAgIG1zZzogJ05vIHVybCBmb3VuZCBvbiBkb2MnLFxuICAgICAgICAgICAgcHJvamVjdDoge1xuICAgICAgICAgICAgICAgIGlkOiBwcm9jZXNzLmVudi5QQVlMT0FEX0NMT1VEX1BST0pFQ1RfSURcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgY2FjaGVLZXk6IHByb2Nlc3MuZW52LlBBWUxPQURfQ0xPVURfQ0FDSEVfS0VZLFxuICAgICAgICBmaWxlcGF0aDogZG9jLnVybCxcbiAgICAgICAgcHJvamVjdElEOiBwcm9jZXNzLmVudi5QQVlMT0FEX0NMT1VEX1BST0pFQ1RfSURcbiAgICB9O1xuICAgIHJlcS5wYXlsb2FkLmxvZ2dlci5kZWJ1Zyh7XG4gICAgICAgIGZpbGVwYXRoOiBkb2MudXJsLFxuICAgICAgICBtc2c6ICdBdHRlbXB0aW5nIHRvIHB1cmdlIGNhY2hlJyxcbiAgICAgICAgb3BlcmF0aW9uLFxuICAgICAgICBwcm9qZWN0OiB7XG4gICAgICAgICAgICBpZDogcHJvY2Vzcy5lbnYuUEFZTE9BRF9DTE9VRF9QUk9KRUNUX0lEXG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBwdXJnZVJlcyA9IGF3YWl0IGZldGNoKGAke2VuZHBvaW50fS9hcGkvcHVyZ2UtY2FjaGVgLCB7XG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgLi4uYm9keVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnXG4gICAgICAgIH0pO1xuICAgICAgICByZXEucGF5bG9hZC5sb2dnZXIuZGVidWcoe1xuICAgICAgICAgICAgbXNnOiAnUHVyZ2UgY2FjaGUgcmVzdWx0JyxcbiAgICAgICAgICAgIG9wZXJhdGlvbixcbiAgICAgICAgICAgIHN0YXR1c0NvZGU6IHB1cmdlUmVzLnN0YXR1c1xuICAgICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVxLnBheWxvYWQubG9nZ2VyLmVycm9yKHtcbiAgICAgICAgICAgIGJvZHksXG4gICAgICAgICAgICBlcnIsXG4gICAgICAgICAgICBtc2c6ICcvcHVyZ2UtY2FjaGUgY2FsbCBmYWlsZWQnXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXBsb2FkQ2FjaGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/hooks/uploadCache.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/index.js":
/*!**********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/index.js ***!
  \**********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createKey: () => (/* reexport safe */ _utilities_createKey_js__WEBPACK_IMPORTED_MODULE_1__.createKey),\n/* harmony export */   getStorageClient: () => (/* reexport safe */ _utilities_getStorageClient_js__WEBPACK_IMPORTED_MODULE_2__.getStorageClient),\n/* harmony export */   payloadCloudPlugin: () => (/* reexport safe */ _plugin_js__WEBPACK_IMPORTED_MODULE_0__.payloadCloudPlugin)\n/* harmony export */ });\n/* harmony import */ var _plugin_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./plugin.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/plugin.js\");\n/* harmony import */ var _utilities_createKey_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/createKey.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/utilities/createKey.js\");\n/* harmony import */ var _utilities_getStorageClient_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utilities/getStorageClient.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/utilities/getStorageClient.js\");\n\n\n\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjIzLjBfcGF5bG9hZEAzLjIzLjBfZ3JhcGhxbEAxNi4xMC4wX21vbmFjby1lZGl0b3JAMC41Mi4yX3JlYWN0LWRvX3BpbWl6MjNjemIyYXdtM3IyY3Q2b2hrYWh5L25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQWlEO0FBQ0k7QUFDYzs7QUFFbkUiLCJzb3VyY2VzIjpbIi9Vc2Vycy90b3NoL0RvY3VtZW50cy9QbGF0Zm9ybUlPL1Byb2plY3RzL3N0cmFwaTUvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK3BheWxvYWQtY2xvdWRAMy4yMy4wX3BheWxvYWRAMy4yMy4wX2dyYXBocWxAMTYuMTAuMF9tb25hY28tZWRpdG9yQDAuNTIuMl9yZWFjdC1kb19waW1pejIzY3piMmF3bTNyMmN0Nm9oa2FoeS9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvcGF5bG9hZC1jbG91ZC9kaXN0L2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7IHBheWxvYWRDbG91ZFBsdWdpbiB9IGZyb20gJy4vcGx1Z2luLmpzJztcbmV4cG9ydCB7IGNyZWF0ZUtleSB9IGZyb20gJy4vdXRpbGl0aWVzL2NyZWF0ZUtleS5qcyc7XG5leHBvcnQgeyBnZXRTdG9yYWdlQ2xpZW50IH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0U3RvcmFnZUNsaWVudC5qcyc7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/plugin.js":
/*!***********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/plugin.js ***!
  \***********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateRandomString: () => (/* binding */ generateRandomString),\n/* harmony export */   payloadCloudPlugin: () => (/* binding */ payloadCloudPlugin)\n/* harmony export */ });\n/* harmony import */ var _email_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./email.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/email.js\");\n/* harmony import */ var _hooks_afterDelete_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./hooks/afterDelete.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/hooks/afterDelete.js\");\n/* harmony import */ var _hooks_beforeChange_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./hooks/beforeChange.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/hooks/beforeChange.js\");\n/* harmony import */ var _hooks_uploadCache_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./hooks/uploadCache.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/hooks/uploadCache.js\");\n/* harmony import */ var _staticHandler_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./staticHandler.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/staticHandler.js\");\n\n\n\n\n\nconst generateRandomString = ()=>{\n    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    return Array.from({\n        length: 24\n    }, ()=>chars[Math.floor(Math.random() * chars.length)]).join('');\n};\nconst payloadCloudPlugin = (pluginOptions)=>async (incomingConfig)=>{\n        let config = {\n            ...incomingConfig\n        };\n        if (process.env.PAYLOAD_CLOUD !== 'true') {\n            return config;\n        }\n        const cachingEnabled = pluginOptions?.uploadCaching !== false && !!process.env.PAYLOAD_CLOUD_CACHE_KEY;\n        const apiEndpoint = pluginOptions?.endpoint || 'https://cloud-api.payloadcms.com';\n        // Configure cloud storage\n        if (pluginOptions?.storage !== false) {\n            config = {\n                ...config,\n                collections: (config.collections || []).map((collection)=>{\n                    if (collection.upload) {\n                        return {\n                            ...collection,\n                            hooks: {\n                                ...collection.hooks || {},\n                                afterChange: [\n                                    ...collection.hooks?.afterChange || [],\n                                    ...cachingEnabled ? [\n                                        (0,_hooks_uploadCache_js__WEBPACK_IMPORTED_MODULE_3__.getCacheUploadsAfterChangeHook)({\n                                            endpoint: apiEndpoint\n                                        })\n                                    ] : []\n                                ],\n                                afterDelete: [\n                                    ...collection.hooks?.afterDelete || [],\n                                    (0,_hooks_afterDelete_js__WEBPACK_IMPORTED_MODULE_1__.getAfterDeleteHook)({\n                                        collection\n                                    }),\n                                    ...cachingEnabled ? [\n                                        (0,_hooks_uploadCache_js__WEBPACK_IMPORTED_MODULE_3__.getCacheUploadsAfterDeleteHook)({\n                                            endpoint: apiEndpoint\n                                        })\n                                    ] : []\n                                ],\n                                beforeChange: [\n                                    ...collection.hooks?.beforeChange || [],\n                                    (0,_hooks_beforeChange_js__WEBPACK_IMPORTED_MODULE_2__.getBeforeChangeHook)({\n                                        collection\n                                    })\n                                ]\n                            },\n                            upload: {\n                                ...typeof collection.upload === 'object' ? collection.upload : {},\n                                disableLocalStorage: true,\n                                handlers: [\n                                    ...typeof collection.upload === 'object' && Array.isArray(collection.upload.handlers) ? collection.upload.handlers : [],\n                                    (0,_staticHandler_js__WEBPACK_IMPORTED_MODULE_4__.getStaticHandler)({\n                                        cachingOptions: pluginOptions?.uploadCaching,\n                                        collection,\n                                        debug: pluginOptions?.debug\n                                    })\n                                ]\n                            }\n                        };\n                    }\n                    return collection;\n                }),\n                upload: {\n                    ...config.upload || {},\n                    useTempFiles: true\n                }\n            };\n        }\n        // Configure cloud email\n        const apiKey = process.env.PAYLOAD_CLOUD_EMAIL_API_KEY;\n        const defaultDomain = process.env.PAYLOAD_CLOUD_DEFAULT_DOMAIN;\n        if (pluginOptions?.email !== false && apiKey && defaultDomain) {\n            config.email = await (0,_email_js__WEBPACK_IMPORTED_MODULE_0__.payloadCloudEmail)({\n                apiKey,\n                config,\n                defaultDomain,\n                defaultFromAddress: pluginOptions?.email?.defaultFromAddress,\n                defaultFromName: pluginOptions?.email?.defaultFromName,\n                skipVerify: pluginOptions?.email?.skipVerify\n            });\n        }\n        // We make sure to only run cronjobs on one instance using a instance identifier stored in a global.\n        const DEFAULT_CRON = '* * * * *';\n        const DEFAULT_LIMIT = 10;\n        const DEFAULT_CRON_JOB = {\n            cron: DEFAULT_CRON,\n            limit: DEFAULT_LIMIT,\n            queue: 'default'\n        };\n        config.globals = [\n            ...config.globals || [],\n            {\n                slug: 'payload-cloud-instance',\n                admin: {\n                    hidden: true\n                },\n                fields: [\n                    {\n                        name: 'instance',\n                        type: 'text',\n                        required: true\n                    }\n                ]\n            }\n        ];\n        if (pluginOptions?.enableAutoRun === false || !config.jobs) {\n            return config;\n        }\n        const oldAutoRunCopy = config.jobs.autoRun ?? [];\n        const hasExistingAutorun = Boolean(config.jobs.autoRun);\n        const newShouldAutoRun = async (payload)=>{\n            if (process.env.PAYLOAD_CLOUD_JOBS_INSTANCE) {\n                const retrievedGlobal = await payload.findGlobal({\n                    slug: 'payload-cloud-instance'\n                });\n                if (retrievedGlobal.instance === process.env.PAYLOAD_CLOUD_JOBS_INSTANCE) {\n                    return true;\n                } else {\n                    process.env.PAYLOAD_CLOUD_JOBS_INSTANCE = '';\n                }\n            }\n            return false;\n        };\n        if (!config.jobs.shouldAutoRun) {\n            config.jobs.shouldAutoRun = newShouldAutoRun;\n        }\n        const newAutoRun = async (payload)=>{\n            const instance = generateRandomString();\n            process.env.PAYLOAD_CLOUD_JOBS_INSTANCE = instance;\n            await payload.updateGlobal({\n                slug: 'payload-cloud-instance',\n                data: {\n                    instance\n                }\n            });\n            if (!hasExistingAutorun) {\n                return [\n                    DEFAULT_CRON_JOB\n                ];\n            }\n            return typeof oldAutoRunCopy === 'function' ? await oldAutoRunCopy(payload) : oldAutoRunCopy;\n        };\n        config.jobs.autoRun = newAutoRun;\n        return config;\n    };\n\n//# sourceMappingURL=plugin.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjIzLjBfcGF5bG9hZEAzLjIzLjBfZ3JhcGhxbEAxNi4xMC4wX21vbmFjby1lZGl0b3JAMC41Mi4yX3JlYWN0LWRvX3BpbWl6MjNjemIyYXdtM3IyY3Q2b2hrYWh5L25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3QvcGx1Z2luLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBK0M7QUFDYTtBQUNFO0FBQzBDO0FBQ2xEO0FBQy9DO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlEO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxxRkFBOEI7QUFDdEU7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MseUVBQWtCO0FBQ3REO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0Esd0NBQXdDLHFGQUE4QjtBQUN0RTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQywyRUFBbUI7QUFDdkQ7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQSxpR0FBaUc7QUFDakc7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLG1FQUFnQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLDREQUFpQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvdG9zaC9Eb2N1bWVudHMvUGxhdGZvcm1JTy9Qcm9qZWN0cy9zdHJhcGk1L25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytwYXlsb2FkLWNsb3VkQDMuMjMuMF9wYXlsb2FkQDMuMjMuMF9ncmFwaHFsQDE2LjEwLjBfbW9uYWNvLWVkaXRvckAwLjUyLjJfcmVhY3QtZG9fcGltaXoyM2N6YjJhd20zcjJjdDZvaGthaHkvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL3BheWxvYWQtY2xvdWQvZGlzdC9wbHVnaW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGF5bG9hZENsb3VkRW1haWwgfSBmcm9tICcuL2VtYWlsLmpzJztcbmltcG9ydCB7IGdldEFmdGVyRGVsZXRlSG9vayB9IGZyb20gJy4vaG9va3MvYWZ0ZXJEZWxldGUuanMnO1xuaW1wb3J0IHsgZ2V0QmVmb3JlQ2hhbmdlSG9vayB9IGZyb20gJy4vaG9va3MvYmVmb3JlQ2hhbmdlLmpzJztcbmltcG9ydCB7IGdldENhY2hlVXBsb2Fkc0FmdGVyQ2hhbmdlSG9vaywgZ2V0Q2FjaGVVcGxvYWRzQWZ0ZXJEZWxldGVIb29rIH0gZnJvbSAnLi9ob29rcy91cGxvYWRDYWNoZS5qcyc7XG5pbXBvcnQgeyBnZXRTdGF0aWNIYW5kbGVyIH0gZnJvbSAnLi9zdGF0aWNIYW5kbGVyLmpzJztcbmV4cG9ydCBjb25zdCBnZW5lcmF0ZVJhbmRvbVN0cmluZyA9ICgpPT57XG4gICAgY29uc3QgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODknO1xuICAgIHJldHVybiBBcnJheS5mcm9tKHtcbiAgICAgICAgbGVuZ3RoOiAyNFxuICAgIH0sICgpPT5jaGFyc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFycy5sZW5ndGgpXSkuam9pbignJyk7XG59O1xuZXhwb3J0IGNvbnN0IHBheWxvYWRDbG91ZFBsdWdpbiA9IChwbHVnaW5PcHRpb25zKT0+YXN5bmMgKGluY29taW5nQ29uZmlnKT0+e1xuICAgICAgICBsZXQgY29uZmlnID0ge1xuICAgICAgICAgICAgLi4uaW5jb21pbmdDb25maWdcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52LlBBWUxPQURfQ0xPVUQgIT09ICd0cnVlJykge1xuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjYWNoaW5nRW5hYmxlZCA9IHBsdWdpbk9wdGlvbnM/LnVwbG9hZENhY2hpbmcgIT09IGZhbHNlICYmICEhcHJvY2Vzcy5lbnYuUEFZTE9BRF9DTE9VRF9DQUNIRV9LRVk7XG4gICAgICAgIGNvbnN0IGFwaUVuZHBvaW50ID0gcGx1Z2luT3B0aW9ucz8uZW5kcG9pbnQgfHwgJ2h0dHBzOi8vY2xvdWQtYXBpLnBheWxvYWRjbXMuY29tJztcbiAgICAgICAgLy8gQ29uZmlndXJlIGNsb3VkIHN0b3JhZ2VcbiAgICAgICAgaWYgKHBsdWdpbk9wdGlvbnM/LnN0b3JhZ2UgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICBjb25maWcgPSB7XG4gICAgICAgICAgICAgICAgLi4uY29uZmlnLFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25zOiAoY29uZmlnLmNvbGxlY3Rpb25zIHx8IFtdKS5tYXAoKGNvbGxlY3Rpb24pPT57XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xsZWN0aW9uLnVwbG9hZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jb2xsZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvb2tzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNvbGxlY3Rpb24uaG9va3MgfHwge30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyQ2hhbmdlOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jb2xsZWN0aW9uLmhvb2tzPy5hZnRlckNoYW5nZSB8fCBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNhY2hpbmdFbmFibGVkID8gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldENhY2hlVXBsb2Fkc0FmdGVyQ2hhbmdlSG9vayh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZHBvaW50OiBhcGlFbmRwb2ludFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdIDogW11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWZ0ZXJEZWxldGU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNvbGxlY3Rpb24uaG9va3M/LmFmdGVyRGVsZXRlIHx8IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0QWZ0ZXJEZWxldGVIb29rKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNhY2hpbmdFbmFibGVkID8gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldENhY2hlVXBsb2Fkc0FmdGVyRGVsZXRlSG9vayh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZHBvaW50OiBhcGlFbmRwb2ludFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdIDogW11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVmb3JlQ2hhbmdlOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jb2xsZWN0aW9uLmhvb2tzPy5iZWZvcmVDaGFuZ2UgfHwgW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRCZWZvcmVDaGFuZ2VIb29rKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4udHlwZW9mIGNvbGxlY3Rpb24udXBsb2FkID09PSAnb2JqZWN0JyA/IGNvbGxlY3Rpb24udXBsb2FkIDoge30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVMb2NhbFN0b3JhZ2U6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXJzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi50eXBlb2YgY29sbGVjdGlvbi51cGxvYWQgPT09ICdvYmplY3QnICYmIEFycmF5LmlzQXJyYXkoY29sbGVjdGlvbi51cGxvYWQuaGFuZGxlcnMpID8gY29sbGVjdGlvbi51cGxvYWQuaGFuZGxlcnMgOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFN0YXRpY0hhbmRsZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hpbmdPcHRpb25zOiBwbHVnaW5PcHRpb25zPy51cGxvYWRDYWNoaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWc6IHBsdWdpbk9wdGlvbnM/LmRlYnVnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29sbGVjdGlvbjtcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB1cGxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY29uZmlnLnVwbG9hZCB8fCB7fSxcbiAgICAgICAgICAgICAgICAgICAgdXNlVGVtcEZpbGVzOiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDb25maWd1cmUgY2xvdWQgZW1haWxcbiAgICAgICAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuUEFZTE9BRF9DTE9VRF9FTUFJTF9BUElfS0VZO1xuICAgICAgICBjb25zdCBkZWZhdWx0RG9tYWluID0gcHJvY2Vzcy5lbnYuUEFZTE9BRF9DTE9VRF9ERUZBVUxUX0RPTUFJTjtcbiAgICAgICAgaWYgKHBsdWdpbk9wdGlvbnM/LmVtYWlsICE9PSBmYWxzZSAmJiBhcGlLZXkgJiYgZGVmYXVsdERvbWFpbikge1xuICAgICAgICAgICAgY29uZmlnLmVtYWlsID0gYXdhaXQgcGF5bG9hZENsb3VkRW1haWwoe1xuICAgICAgICAgICAgICAgIGFwaUtleSxcbiAgICAgICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICAgICAgZGVmYXVsdERvbWFpbixcbiAgICAgICAgICAgICAgICBkZWZhdWx0RnJvbUFkZHJlc3M6IHBsdWdpbk9wdGlvbnM/LmVtYWlsPy5kZWZhdWx0RnJvbUFkZHJlc3MsXG4gICAgICAgICAgICAgICAgZGVmYXVsdEZyb21OYW1lOiBwbHVnaW5PcHRpb25zPy5lbWFpbD8uZGVmYXVsdEZyb21OYW1lLFxuICAgICAgICAgICAgICAgIHNraXBWZXJpZnk6IHBsdWdpbk9wdGlvbnM/LmVtYWlsPy5za2lwVmVyaWZ5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSBtYWtlIHN1cmUgdG8gb25seSBydW4gY3JvbmpvYnMgb24gb25lIGluc3RhbmNlIHVzaW5nIGEgaW5zdGFuY2UgaWRlbnRpZmllciBzdG9yZWQgaW4gYSBnbG9iYWwuXG4gICAgICAgIGNvbnN0IERFRkFVTFRfQ1JPTiA9ICcqICogKiAqIConO1xuICAgICAgICBjb25zdCBERUZBVUxUX0xJTUlUID0gMTA7XG4gICAgICAgIGNvbnN0IERFRkFVTFRfQ1JPTl9KT0IgPSB7XG4gICAgICAgICAgICBjcm9uOiBERUZBVUxUX0NST04sXG4gICAgICAgICAgICBsaW1pdDogREVGQVVMVF9MSU1JVCxcbiAgICAgICAgICAgIHF1ZXVlOiAnZGVmYXVsdCdcbiAgICAgICAgfTtcbiAgICAgICAgY29uZmlnLmdsb2JhbHMgPSBbXG4gICAgICAgICAgICAuLi5jb25maWcuZ2xvYmFscyB8fCBbXSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBzbHVnOiAncGF5bG9hZC1jbG91ZC1pbnN0YW5jZScsXG4gICAgICAgICAgICAgICAgYWRtaW46IHtcbiAgICAgICAgICAgICAgICAgICAgaGlkZGVuOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmaWVsZHM6IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2luc3RhbmNlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgIF07XG4gICAgICAgIGlmIChwbHVnaW5PcHRpb25zPy5lbmFibGVBdXRvUnVuID09PSBmYWxzZSB8fCAhY29uZmlnLmpvYnMpIHtcbiAgICAgICAgICAgIHJldHVybiBjb25maWc7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb2xkQXV0b1J1bkNvcHkgPSBjb25maWcuam9icy5hdXRvUnVuID8/IFtdO1xuICAgICAgICBjb25zdCBoYXNFeGlzdGluZ0F1dG9ydW4gPSBCb29sZWFuKGNvbmZpZy5qb2JzLmF1dG9SdW4pO1xuICAgICAgICBjb25zdCBuZXdTaG91bGRBdXRvUnVuID0gYXN5bmMgKHBheWxvYWQpPT57XG4gICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuUEFZTE9BRF9DTE9VRF9KT0JTX0lOU1RBTkNFKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmV0cmlldmVkR2xvYmFsID0gYXdhaXQgcGF5bG9hZC5maW5kR2xvYmFsKHtcbiAgICAgICAgICAgICAgICAgICAgc2x1ZzogJ3BheWxvYWQtY2xvdWQtaW5zdGFuY2UnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHJldHJpZXZlZEdsb2JhbC5pbnN0YW5jZSA9PT0gcHJvY2Vzcy5lbnYuUEFZTE9BRF9DTE9VRF9KT0JTX0lOU1RBTkNFKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZW52LlBBWUxPQURfQ0xPVURfSk9CU19JTlNUQU5DRSA9ICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCFjb25maWcuam9icy5zaG91bGRBdXRvUnVuKSB7XG4gICAgICAgICAgICBjb25maWcuam9icy5zaG91bGRBdXRvUnVuID0gbmV3U2hvdWxkQXV0b1J1bjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdBdXRvUnVuID0gYXN5bmMgKHBheWxvYWQpPT57XG4gICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IGdlbmVyYXRlUmFuZG9tU3RyaW5nKCk7XG4gICAgICAgICAgICBwcm9jZXNzLmVudi5QQVlMT0FEX0NMT1VEX0pPQlNfSU5TVEFOQ0UgPSBpbnN0YW5jZTtcbiAgICAgICAgICAgIGF3YWl0IHBheWxvYWQudXBkYXRlR2xvYmFsKHtcbiAgICAgICAgICAgICAgICBzbHVnOiAncGF5bG9hZC1jbG91ZC1pbnN0YW5jZScsXG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFoYXNFeGlzdGluZ0F1dG9ydW4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICBERUZBVUxUX0NST05fSk9CXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0eXBlb2Ygb2xkQXV0b1J1bkNvcHkgPT09ICdmdW5jdGlvbicgPyBhd2FpdCBvbGRBdXRvUnVuQ29weShwYXlsb2FkKSA6IG9sZEF1dG9SdW5Db3B5O1xuICAgICAgICB9O1xuICAgICAgICBjb25maWcuam9icy5hdXRvUnVuID0gbmV3QXV0b1J1bjtcbiAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wbHVnaW4uanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/plugin.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/staticHandler.js":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/staticHandler.js ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getStaticHandler: () => (/* binding */ getStaticHandler)\n/* harmony export */ });\n/* harmony import */ var _utilities_createKey_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/createKey.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/utilities/createKey.js\");\n/* harmony import */ var _utilities_getStorageClient_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/getStorageClient.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/utilities/getStorageClient.js\");\n\n\n// Type guard for NodeJS.Readable streams\nconst isNodeReadableStream = (body)=>{\n    return typeof body === 'object' && body !== null && 'pipe' in body && typeof body.pipe === 'function' && 'destroy' in body && typeof body.destroy === 'function';\n};\n// Convert a stream into a promise that resolves with a Buffer\nconst streamToBuffer = async (readableStream)=>{\n    const chunks = [];\n    for await (const chunk of readableStream){\n        chunks.push(typeof chunk === 'string' ? Buffer.from(chunk) : chunk);\n    }\n    return Buffer.concat(chunks);\n};\nconst getStaticHandler = ({ cachingOptions, collection, debug })=>{\n    let maxAge = 86400 // 24 hours default\n    ;\n    let collCacheConfig;\n    if (cachingOptions !== false) {\n        // Set custom maxAge for all collections\n        maxAge = cachingOptions?.maxAge || maxAge;\n        collCacheConfig = cachingOptions?.collections?.[collection.slug] || {};\n    }\n    // Set maxAge using collection-specific override\n    maxAge = collCacheConfig?.maxAge || maxAge;\n    const cachingEnabled = cachingOptions !== false && !!process.env.PAYLOAD_CLOUD_CACHE_KEY && collCacheConfig?.enabled !== false;\n    return async (req, { params })=>{\n        let key = '';\n        try {\n            const { identityID, storageClient } = await (0,_utilities_getStorageClient_js__WEBPACK_IMPORTED_MODULE_1__.getStorageClient)();\n            key = (0,_utilities_createKey_js__WEBPACK_IMPORTED_MODULE_0__.createKey)({\n                collection: collection.slug,\n                filename: params.filename,\n                identityID\n            });\n            const object = await storageClient.getObject({\n                Bucket: process.env.PAYLOAD_CLOUD_BUCKET,\n                Key: key\n            });\n            if (!object.Body || !object.ContentType || !object.ETag) {\n                return new Response(null, {\n                    status: 404,\n                    statusText: 'Not Found'\n                });\n            }\n            // On error, manually destroy stream to close socket\n            if (object.Body && isNodeReadableStream(object.Body)) {\n                const stream = object.Body;\n                stream.on('error', (err)=>{\n                    req.payload.logger.error({\n                        err,\n                        key,\n                        msg: 'Error streaming S3 object, destroying stream'\n                    });\n                    stream.destroy();\n                });\n            }\n            const bodyBuffer = await streamToBuffer(object.Body);\n            return new Response(bodyBuffer, {\n                headers: new Headers({\n                    'Content-Length': String(object.ContentLength),\n                    'Content-Type': object.ContentType,\n                    ...cachingEnabled && {\n                        'Cache-Control': `public, max-age=${maxAge}`\n                    },\n                    ETag: object.ETag\n                }),\n                status: 200\n            });\n        } catch (err) {\n            // Handle each error explicitly\n            if (err instanceof Error) {\n                /**\n         * Note: If AccessDenied comes back, it typically means that the object key is not found.\n         * The AWS SDK throws this because it attempts an s3:ListBucket operation under the hood\n         * if it does not find the object key, which we have disallowed in our bucket policy.\n         */ if (err.name === 'AccessDenied') {\n                    req.payload.logger.warn({\n                        awsErr: debug ? err : err.name,\n                        collectionSlug: collection.slug,\n                        msg: `Requested file not found in cloud storage: ${params.filename}`,\n                        params,\n                        requestedKey: key\n                    });\n                    return new Response(null, {\n                        status: 404,\n                        statusText: 'Not Found'\n                    });\n                } else if (err.name === 'NoSuchKey') {\n                    req.payload.logger.warn({\n                        awsErr: debug ? err : err.name,\n                        collectionSlug: collection.slug,\n                        msg: `Requested file not found in cloud storage: ${params.filename}`,\n                        params,\n                        requestedKey: key\n                    });\n                    return new Response(null, {\n                        status: 404,\n                        statusText: 'Not Found'\n                    });\n                }\n            }\n            req.payload.logger.error({\n                collectionSlug: collection.slug,\n                err,\n                msg: `Error getting file from cloud storage: ${params.filename}`,\n                params,\n                requestedKey: key\n            });\n            return new Response('Internal Server Error', {\n                status: 500\n            });\n        }\n    };\n};\n\n//# sourceMappingURL=staticHandler.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjIzLjBfcGF5bG9hZEAzLjIzLjBfZ3JhcGhxbEAxNi4xMC4wX21vbmFjby1lZGl0b3JAMC41Mi4yX3JlYWN0LWRvX3BpbWl6MjNjemIyYXdtM3IyY3Q2b2hrYWh5L25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3Qvc3RhdGljSGFuZGxlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBcUQ7QUFDYztBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyw0QkFBNEIsbUNBQW1DO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsUUFBUTtBQUNqQztBQUNBO0FBQ0Esb0JBQW9CLDRCQUE0QixRQUFRLGdGQUFnQjtBQUN4RSxrQkFBa0Isa0VBQVM7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsT0FBTztBQUNuRSxxQkFBcUI7QUFDckI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhO0FBQ2IsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFLGdCQUFnQjtBQUMzRjtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFLGdCQUFnQjtBQUMzRjtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELGdCQUFnQjtBQUMvRTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvdG9zaC9Eb2N1bWVudHMvUGxhdGZvcm1JTy9Qcm9qZWN0cy9zdHJhcGk1L25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytwYXlsb2FkLWNsb3VkQDMuMjMuMF9wYXlsb2FkQDMuMjMuMF9ncmFwaHFsQDE2LjEwLjBfbW9uYWNvLWVkaXRvckAwLjUyLjJfcmVhY3QtZG9fcGltaXoyM2N6YjJhd20zcjJjdDZvaGthaHkvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL3BheWxvYWQtY2xvdWQvZGlzdC9zdGF0aWNIYW5kbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUtleSB9IGZyb20gJy4vdXRpbGl0aWVzL2NyZWF0ZUtleS5qcyc7XG5pbXBvcnQgeyBnZXRTdG9yYWdlQ2xpZW50IH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0U3RvcmFnZUNsaWVudC5qcyc7XG4vLyBUeXBlIGd1YXJkIGZvciBOb2RlSlMuUmVhZGFibGUgc3RyZWFtc1xuY29uc3QgaXNOb2RlUmVhZGFibGVTdHJlYW0gPSAoYm9keSk9PntcbiAgICByZXR1cm4gdHlwZW9mIGJvZHkgPT09ICdvYmplY3QnICYmIGJvZHkgIT09IG51bGwgJiYgJ3BpcGUnIGluIGJvZHkgJiYgdHlwZW9mIGJvZHkucGlwZSA9PT0gJ2Z1bmN0aW9uJyAmJiAnZGVzdHJveScgaW4gYm9keSAmJiB0eXBlb2YgYm9keS5kZXN0cm95ID09PSAnZnVuY3Rpb24nO1xufTtcbi8vIENvbnZlcnQgYSBzdHJlYW0gaW50byBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIGEgQnVmZmVyXG5jb25zdCBzdHJlYW1Ub0J1ZmZlciA9IGFzeW5jIChyZWFkYWJsZVN0cmVhbSk9PntcbiAgICBjb25zdCBjaHVua3MgPSBbXTtcbiAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHJlYWRhYmxlU3RyZWFtKXtcbiAgICAgICAgY2h1bmtzLnB1c2godHlwZW9mIGNodW5rID09PSAnc3RyaW5nJyA/IEJ1ZmZlci5mcm9tKGNodW5rKSA6IGNodW5rKTtcbiAgICB9XG4gICAgcmV0dXJuIEJ1ZmZlci5jb25jYXQoY2h1bmtzKTtcbn07XG5leHBvcnQgY29uc3QgZ2V0U3RhdGljSGFuZGxlciA9ICh7IGNhY2hpbmdPcHRpb25zLCBjb2xsZWN0aW9uLCBkZWJ1ZyB9KT0+e1xuICAgIGxldCBtYXhBZ2UgPSA4NjQwMCAvLyAyNCBob3VycyBkZWZhdWx0XG4gICAgO1xuICAgIGxldCBjb2xsQ2FjaGVDb25maWc7XG4gICAgaWYgKGNhY2hpbmdPcHRpb25zICE9PSBmYWxzZSkge1xuICAgICAgICAvLyBTZXQgY3VzdG9tIG1heEFnZSBmb3IgYWxsIGNvbGxlY3Rpb25zXG4gICAgICAgIG1heEFnZSA9IGNhY2hpbmdPcHRpb25zPy5tYXhBZ2UgfHwgbWF4QWdlO1xuICAgICAgICBjb2xsQ2FjaGVDb25maWcgPSBjYWNoaW5nT3B0aW9ucz8uY29sbGVjdGlvbnM/Lltjb2xsZWN0aW9uLnNsdWddIHx8IHt9O1xuICAgIH1cbiAgICAvLyBTZXQgbWF4QWdlIHVzaW5nIGNvbGxlY3Rpb24tc3BlY2lmaWMgb3ZlcnJpZGVcbiAgICBtYXhBZ2UgPSBjb2xsQ2FjaGVDb25maWc/Lm1heEFnZSB8fCBtYXhBZ2U7XG4gICAgY29uc3QgY2FjaGluZ0VuYWJsZWQgPSBjYWNoaW5nT3B0aW9ucyAhPT0gZmFsc2UgJiYgISFwcm9jZXNzLmVudi5QQVlMT0FEX0NMT1VEX0NBQ0hFX0tFWSAmJiBjb2xsQ2FjaGVDb25maWc/LmVuYWJsZWQgIT09IGZhbHNlO1xuICAgIHJldHVybiBhc3luYyAocmVxLCB7IHBhcmFtcyB9KT0+e1xuICAgICAgICBsZXQga2V5ID0gJyc7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IGlkZW50aXR5SUQsIHN0b3JhZ2VDbGllbnQgfSA9IGF3YWl0IGdldFN0b3JhZ2VDbGllbnQoKTtcbiAgICAgICAgICAgIGtleSA9IGNyZWF0ZUtleSh7XG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbjogY29sbGVjdGlvbi5zbHVnLFxuICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBwYXJhbXMuZmlsZW5hbWUsXG4gICAgICAgICAgICAgICAgaWRlbnRpdHlJRFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBvYmplY3QgPSBhd2FpdCBzdG9yYWdlQ2xpZW50LmdldE9iamVjdCh7XG4gICAgICAgICAgICAgICAgQnVja2V0OiBwcm9jZXNzLmVudi5QQVlMT0FEX0NMT1VEX0JVQ0tFVCxcbiAgICAgICAgICAgICAgICBLZXk6IGtleVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIW9iamVjdC5Cb2R5IHx8ICFvYmplY3QuQ29udGVudFR5cGUgfHwgIW9iamVjdC5FVGFnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShudWxsLCB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogNDA0LFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiAnTm90IEZvdW5kJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gT24gZXJyb3IsIG1hbnVhbGx5IGRlc3Ryb3kgc3RyZWFtIHRvIGNsb3NlIHNvY2tldFxuICAgICAgICAgICAgaWYgKG9iamVjdC5Cb2R5ICYmIGlzTm9kZVJlYWRhYmxlU3RyZWFtKG9iamVjdC5Cb2R5KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVhbSA9IG9iamVjdC5Cb2R5O1xuICAgICAgICAgICAgICAgIHN0cmVhbS5vbignZXJyb3InLCAoZXJyKT0+e1xuICAgICAgICAgICAgICAgICAgICByZXEucGF5bG9hZC5sb2dnZXIuZXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgbXNnOiAnRXJyb3Igc3RyZWFtaW5nIFMzIG9iamVjdCwgZGVzdHJveWluZyBzdHJlYW0nXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdHJlYW0uZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYm9keUJ1ZmZlciA9IGF3YWl0IHN0cmVhbVRvQnVmZmVyKG9iamVjdC5Cb2R5KTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoYm9keUJ1ZmZlciwge1xuICAgICAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtTGVuZ3RoJzogU3RyaW5nKG9iamVjdC5Db250ZW50TGVuZ3RoKSxcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6IG9iamVjdC5Db250ZW50VHlwZSxcbiAgICAgICAgICAgICAgICAgICAgLi4uY2FjaGluZ0VuYWJsZWQgJiYge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ0NhY2hlLUNvbnRyb2wnOiBgcHVibGljLCBtYXgtYWdlPSR7bWF4QWdlfWBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgRVRhZzogb2JqZWN0LkVUYWdcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IDIwMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgLy8gSGFuZGxlIGVhY2ggZXJyb3IgZXhwbGljaXRseVxuICAgICAgICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAqIE5vdGU6IElmIEFjY2Vzc0RlbmllZCBjb21lcyBiYWNrLCBpdCB0eXBpY2FsbHkgbWVhbnMgdGhhdCB0aGUgb2JqZWN0IGtleSBpcyBub3QgZm91bmQuXG4gICAgICAgICAqIFRoZSBBV1MgU0RLIHRocm93cyB0aGlzIGJlY2F1c2UgaXQgYXR0ZW1wdHMgYW4gczM6TGlzdEJ1Y2tldCBvcGVyYXRpb24gdW5kZXIgdGhlIGhvb2RcbiAgICAgICAgICogaWYgaXQgZG9lcyBub3QgZmluZCB0aGUgb2JqZWN0IGtleSwgd2hpY2ggd2UgaGF2ZSBkaXNhbGxvd2VkIGluIG91ciBidWNrZXQgcG9saWN5LlxuICAgICAgICAgKi8gaWYgKGVyci5uYW1lID09PSAnQWNjZXNzRGVuaWVkJykge1xuICAgICAgICAgICAgICAgICAgICByZXEucGF5bG9hZC5sb2dnZXIud2Fybih7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd3NFcnI6IGRlYnVnID8gZXJyIDogZXJyLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uU2x1ZzogY29sbGVjdGlvbi5zbHVnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXNnOiBgUmVxdWVzdGVkIGZpbGUgbm90IGZvdW5kIGluIGNsb3VkIHN0b3JhZ2U6ICR7cGFyYW1zLmZpbGVuYW1lfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ZWRLZXk6IGtleVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShudWxsLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IDQwNCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6ICdOb3QgRm91bmQnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyLm5hbWUgPT09ICdOb1N1Y2hLZXknKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5wYXlsb2FkLmxvZ2dlci53YXJuKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3c0VycjogZGVidWcgPyBlcnIgOiBlcnIubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25TbHVnOiBjb2xsZWN0aW9uLnNsdWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtc2c6IGBSZXF1ZXN0ZWQgZmlsZSBub3QgZm91bmQgaW4gY2xvdWQgc3RvcmFnZTogJHtwYXJhbXMuZmlsZW5hbWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RlZEtleToga2V5XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKG51bGwsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogNDA0LFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dDogJ05vdCBGb3VuZCdcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVxLnBheWxvYWQubG9nZ2VyLmVycm9yKHtcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uU2x1ZzogY29sbGVjdGlvbi5zbHVnLFxuICAgICAgICAgICAgICAgIGVycixcbiAgICAgICAgICAgICAgICBtc2c6IGBFcnJvciBnZXR0aW5nIGZpbGUgZnJvbSBjbG91ZCBzdG9yYWdlOiAke3BhcmFtcy5maWxlbmFtZX1gLFxuICAgICAgICAgICAgICAgIHBhcmFtcyxcbiAgICAgICAgICAgICAgICByZXF1ZXN0ZWRLZXk6IGtleVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKCdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InLCB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiA1MDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0YXRpY0hhbmRsZXIuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/staticHandler.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/utilities/authAsCognitoUser.js":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/utilities/authAsCognitoUser.js ***!
  \********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authAsCognitoUser: () => (/* binding */ authAsCognitoUser)\n/* harmony export */ });\n/* harmony import */ var amazon_cognito_identity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! amazon-cognito-identity-js */ \"(rsc)/./node_modules/.pnpm/amazon-cognito-identity-js@6.3.12/node_modules/amazon-cognito-identity-js/es/index.js\");\n\nlet sessionAndToken = null;\nconst authAsCognitoUser = async (username, password)=>{\n    // TODO: Check that isValid evaluates expiration\n    if (sessionAndToken?.isValid()) {\n        return sessionAndToken;\n    }\n    if (!process.env.PAYLOAD_CLOUD_COGNITO_USER_POOL_CLIENT_ID) {\n        throw new Error('PAYLOAD_CLOUD_COGNITO_USER_POOL_CLIENT_ID is required');\n    }\n    if (!process.env.PAYLOAD_CLOUD_COGNITO_USER_POOL_ID) {\n        throw new Error('PAYLOAD_CLOUD_COGNITO_USER_POOL_ID is required');\n    }\n    const userPool = new amazon_cognito_identity_js__WEBPACK_IMPORTED_MODULE_0__.CognitoUserPool({\n        ClientId: process.env.PAYLOAD_CLOUD_COGNITO_USER_POOL_CLIENT_ID,\n        UserPoolId: process.env.PAYLOAD_CLOUD_COGNITO_USER_POOL_ID\n    });\n    const authenticationDetails = new amazon_cognito_identity_js__WEBPACK_IMPORTED_MODULE_0__.AuthenticationDetails({\n        Password: password,\n        Username: username\n    });\n    const cognitoUser = new amazon_cognito_identity_js__WEBPACK_IMPORTED_MODULE_0__.CognitoUser({\n        Pool: userPool,\n        Username: username\n    });\n    const result = await new Promise((resolve, reject)=>{\n        cognitoUser.authenticateUser(authenticationDetails, {\n            onFailure: (err)=>{\n                reject(err);\n            },\n            onSuccess: (res)=>{\n                resolve(res);\n            }\n        });\n    });\n    sessionAndToken = result;\n    return sessionAndToken;\n};\n\n//# sourceMappingURL=authAsCognitoUser.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjIzLjBfcGF5bG9hZEAzLjIzLjBfZ3JhcGhxbEAxNi4xMC4wX21vbmFjby1lZGl0b3JAMC41Mi4yX3JlYWN0LWRvX3BpbWl6MjNjemIyYXdtM3IyY3Q2b2hrYWh5L25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3QvdXRpbGl0aWVzL2F1dGhBc0NvZ25pdG9Vc2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWlHO0FBQ2pHO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix1RUFBZTtBQUN4QztBQUNBO0FBQ0EsS0FBSztBQUNMLHNDQUFzQyw2RUFBcUI7QUFDM0Q7QUFDQTtBQUNBLEtBQUs7QUFDTCw0QkFBNEIsbUVBQVc7QUFDdkM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL3Rvc2gvRG9jdW1lbnRzL1BsYXRmb3JtSU8vUHJvamVjdHMvc3RyYXBpNS9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjIzLjBfcGF5bG9hZEAzLjIzLjBfZ3JhcGhxbEAxNi4xMC4wX21vbmFjby1lZGl0b3JAMC41Mi4yX3JlYWN0LWRvX3BpbWl6MjNjemIyYXdtM3IyY3Q2b2hrYWh5L25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3QvdXRpbGl0aWVzL2F1dGhBc0NvZ25pdG9Vc2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEF1dGhlbnRpY2F0aW9uRGV0YWlscywgQ29nbml0b1VzZXIsIENvZ25pdG9Vc2VyUG9vbCB9IGZyb20gJ2FtYXpvbi1jb2duaXRvLWlkZW50aXR5LWpzJztcbmxldCBzZXNzaW9uQW5kVG9rZW4gPSBudWxsO1xuZXhwb3J0IGNvbnN0IGF1dGhBc0NvZ25pdG9Vc2VyID0gYXN5bmMgKHVzZXJuYW1lLCBwYXNzd29yZCk9PntcbiAgICAvLyBUT0RPOiBDaGVjayB0aGF0IGlzVmFsaWQgZXZhbHVhdGVzIGV4cGlyYXRpb25cbiAgICBpZiAoc2Vzc2lvbkFuZFRva2VuPy5pc1ZhbGlkKCkpIHtcbiAgICAgICAgcmV0dXJuIHNlc3Npb25BbmRUb2tlbjtcbiAgICB9XG4gICAgaWYgKCFwcm9jZXNzLmVudi5QQVlMT0FEX0NMT1VEX0NPR05JVE9fVVNFUl9QT09MX0NMSUVOVF9JRCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BBWUxPQURfQ0xPVURfQ09HTklUT19VU0VSX1BPT0xfQ0xJRU5UX0lEIGlzIHJlcXVpcmVkJyk7XG4gICAgfVxuICAgIGlmICghcHJvY2Vzcy5lbnYuUEFZTE9BRF9DTE9VRF9DT0dOSVRPX1VTRVJfUE9PTF9JRCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BBWUxPQURfQ0xPVURfQ09HTklUT19VU0VSX1BPT0xfSUQgaXMgcmVxdWlyZWQnKTtcbiAgICB9XG4gICAgY29uc3QgdXNlclBvb2wgPSBuZXcgQ29nbml0b1VzZXJQb29sKHtcbiAgICAgICAgQ2xpZW50SWQ6IHByb2Nlc3MuZW52LlBBWUxPQURfQ0xPVURfQ09HTklUT19VU0VSX1BPT0xfQ0xJRU5UX0lELFxuICAgICAgICBVc2VyUG9vbElkOiBwcm9jZXNzLmVudi5QQVlMT0FEX0NMT1VEX0NPR05JVE9fVVNFUl9QT09MX0lEXG4gICAgfSk7XG4gICAgY29uc3QgYXV0aGVudGljYXRpb25EZXRhaWxzID0gbmV3IEF1dGhlbnRpY2F0aW9uRGV0YWlscyh7XG4gICAgICAgIFBhc3N3b3JkOiBwYXNzd29yZCxcbiAgICAgICAgVXNlcm5hbWU6IHVzZXJuYW1lXG4gICAgfSk7XG4gICAgY29uc3QgY29nbml0b1VzZXIgPSBuZXcgQ29nbml0b1VzZXIoe1xuICAgICAgICBQb29sOiB1c2VyUG9vbCxcbiAgICAgICAgVXNlcm5hbWU6IHVzZXJuYW1lXG4gICAgfSk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PntcbiAgICAgICAgY29nbml0b1VzZXIuYXV0aGVudGljYXRlVXNlcihhdXRoZW50aWNhdGlvbkRldGFpbHMsIHtcbiAgICAgICAgICAgIG9uRmFpbHVyZTogKGVycik9PntcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvblN1Y2Nlc3M6IChyZXMpPT57XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBzZXNzaW9uQW5kVG9rZW4gPSByZXN1bHQ7XG4gICAgcmV0dXJuIHNlc3Npb25BbmRUb2tlbjtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWF1dGhBc0NvZ25pdG9Vc2VyLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/utilities/authAsCognitoUser.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/utilities/createKey.js":
/*!************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/utilities/createKey.js ***!
  \************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createKey: () => (/* binding */ createKey)\n/* harmony export */ });\nconst createKey = ({ collection, filename, identityID })=>`${identityID}/${process.env.PAYLOAD_CLOUD_ENVIRONMENT}/${collection}/${filename}`;\n\n//# sourceMappingURL=createKey.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjIzLjBfcGF5bG9hZEAzLjIzLjBfZ3JhcGhxbEAxNi4xMC4wX21vbmFjby1lZGl0b3JAMC41Mi4yX3JlYWN0LWRvX3BpbWl6MjNjemIyYXdtM3IyY3Q2b2hrYWh5L25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3QvdXRpbGl0aWVzL2NyZWF0ZUtleS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU8scUJBQXFCLGtDQUFrQyxNQUFNLFdBQVcsR0FBRyxzQ0FBc0MsR0FBRyxXQUFXLEdBQUcsU0FBUzs7QUFFbEoiLCJzb3VyY2VzIjpbIi9Vc2Vycy90b3NoL0RvY3VtZW50cy9QbGF0Zm9ybUlPL1Byb2plY3RzL3N0cmFwaTUvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK3BheWxvYWQtY2xvdWRAMy4yMy4wX3BheWxvYWRAMy4yMy4wX2dyYXBocWxAMTYuMTAuMF9tb25hY28tZWRpdG9yQDAuNTIuMl9yZWFjdC1kb19waW1pejIzY3piMmF3bTNyMmN0Nm9oa2FoeS9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvcGF5bG9hZC1jbG91ZC9kaXN0L3V0aWxpdGllcy9jcmVhdGVLZXkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGNyZWF0ZUtleSA9ICh7IGNvbGxlY3Rpb24sIGZpbGVuYW1lLCBpZGVudGl0eUlEIH0pPT5gJHtpZGVudGl0eUlEfS8ke3Byb2Nlc3MuZW52LlBBWUxPQURfQ0xPVURfRU5WSVJPTk1FTlR9LyR7Y29sbGVjdGlvbn0vJHtmaWxlbmFtZX1gO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcmVhdGVLZXkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/utilities/createKey.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/utilities/getIncomingFiles.js":
/*!*******************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/utilities/getIncomingFiles.js ***!
  \*******************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getIncomingFiles: () => (/* binding */ getIncomingFiles)\n/* harmony export */ });\nfunction getIncomingFiles({ data, req }) {\n    const file = req.file;\n    let files = [];\n    if (file && data.filename && data.mimeType) {\n        const mainFile = {\n            buffer: file.data,\n            filename: data.filename,\n            filesize: file.size,\n            mimeType: data.mimeType,\n            tempFilePath: file.tempFilePath\n        };\n        files = [\n            mainFile\n        ];\n        if (data?.sizes) {\n            Object.entries(data.sizes).forEach(([key, resizedFileData])=>{\n                if (req.payloadUploadSizes?.[key] && data.mimeType) {\n                    files = files.concat([\n                        {\n                            buffer: req.payloadUploadSizes[key],\n                            filename: `${resizedFileData.filename}`,\n                            filesize: req.payloadUploadSizes[key].length,\n                            mimeType: data.mimeType\n                        }\n                    ]);\n                }\n            });\n        }\n    }\n    return files;\n}\n\n//# sourceMappingURL=getIncomingFiles.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjIzLjBfcGF5bG9hZEAzLjIzLjBfZ3JhcGhxbEAxNi4xMC4wX21vbmFjby1lZGl0b3JAMC41Mi4yX3JlYWN0LWRvX3BpbWl6MjNjemIyYXdtM3IyY3Q2b2hrYWh5L25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3QvdXRpbGl0aWVzL2dldEluY29taW5nRmlsZXMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLDRCQUE0QixXQUFXO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLHlCQUF5QjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvdG9zaC9Eb2N1bWVudHMvUGxhdGZvcm1JTy9Qcm9qZWN0cy9zdHJhcGk1L25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytwYXlsb2FkLWNsb3VkQDMuMjMuMF9wYXlsb2FkQDMuMjMuMF9ncmFwaHFsQDE2LjEwLjBfbW9uYWNvLWVkaXRvckAwLjUyLjJfcmVhY3QtZG9fcGltaXoyM2N6YjJhd20zcjJjdDZvaGthaHkvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL3BheWxvYWQtY2xvdWQvZGlzdC91dGlsaXRpZXMvZ2V0SW5jb21pbmdGaWxlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gZ2V0SW5jb21pbmdGaWxlcyh7IGRhdGEsIHJlcSB9KSB7XG4gICAgY29uc3QgZmlsZSA9IHJlcS5maWxlO1xuICAgIGxldCBmaWxlcyA9IFtdO1xuICAgIGlmIChmaWxlICYmIGRhdGEuZmlsZW5hbWUgJiYgZGF0YS5taW1lVHlwZSkge1xuICAgICAgICBjb25zdCBtYWluRmlsZSA9IHtcbiAgICAgICAgICAgIGJ1ZmZlcjogZmlsZS5kYXRhLFxuICAgICAgICAgICAgZmlsZW5hbWU6IGRhdGEuZmlsZW5hbWUsXG4gICAgICAgICAgICBmaWxlc2l6ZTogZmlsZS5zaXplLFxuICAgICAgICAgICAgbWltZVR5cGU6IGRhdGEubWltZVR5cGUsXG4gICAgICAgICAgICB0ZW1wRmlsZVBhdGg6IGZpbGUudGVtcEZpbGVQYXRoXG4gICAgICAgIH07XG4gICAgICAgIGZpbGVzID0gW1xuICAgICAgICAgICAgbWFpbkZpbGVcbiAgICAgICAgXTtcbiAgICAgICAgaWYgKGRhdGE/LnNpemVzKSB7XG4gICAgICAgICAgICBPYmplY3QuZW50cmllcyhkYXRhLnNpemVzKS5mb3JFYWNoKChba2V5LCByZXNpemVkRmlsZURhdGFdKT0+e1xuICAgICAgICAgICAgICAgIGlmIChyZXEucGF5bG9hZFVwbG9hZFNpemVzPy5ba2V5XSAmJiBkYXRhLm1pbWVUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGVzID0gZmlsZXMuY29uY2F0KFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZmZXI6IHJlcS5wYXlsb2FkVXBsb2FkU2l6ZXNba2V5XSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogYCR7cmVzaXplZEZpbGVEYXRhLmZpbGVuYW1lfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZXNpemU6IHJlcS5wYXlsb2FkVXBsb2FkU2l6ZXNba2V5XS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWltZVR5cGU6IGRhdGEubWltZVR5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZpbGVzO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXRJbmNvbWluZ0ZpbGVzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/utilities/getIncomingFiles.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/utilities/getStorageClient.js":
/*!*******************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/utilities/getStorageClient.js ***!
  \*******************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getStorageClient: () => (/* binding */ getStorageClient)\n/* harmony export */ });\n/* harmony import */ var _aws_sdk_client_cognito_identity__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-sdk/client-cognito-identity */ \"(rsc)/./node_modules/.pnpm/@aws-sdk+client-cognito-identity@3.750.0/node_modules/@aws-sdk/client-cognito-identity/dist-es/CognitoIdentityClient.js\");\n/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aws-sdk/client-s3 */ \"(rsc)/./node_modules/.pnpm/@aws-sdk+client-s3@3.750.0/node_modules/@aws-sdk/client-s3/dist-es/S3.js\");\n/* harmony import */ var _aws_sdk_credential_providers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-sdk/credential-providers */ \"(rsc)/./node_modules/.pnpm/@aws-sdk+credential-providers@3.750.0/node_modules/@aws-sdk/credential-providers/dist-es/fromCognitoIdentityPool.js\");\n/* harmony import */ var _authAsCognitoUser_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./authAsCognitoUser.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/utilities/authAsCognitoUser.js\");\n\n\n\n\nlet storageClient = null;\nlet session = null;\nlet identityID;\nconst getStorageClient = async ()=>{\n    if (storageClient && session?.isValid()) {\n        return {\n            identityID,\n            storageClient\n        };\n    }\n    if (!process.env.PAYLOAD_CLOUD_PROJECT_ID) {\n        throw new Error('PAYLOAD_CLOUD_PROJECT_ID is required');\n    }\n    if (!process.env.PAYLOAD_CLOUD_COGNITO_PASSWORD) {\n        throw new Error('PAYLOAD_CLOUD_COGNITO_PASSWORD is required');\n    }\n    if (!process.env.PAYLOAD_CLOUD_COGNITO_IDENTITY_POOL_ID) {\n        throw new Error('PAYLOAD_CLOUD_COGNITO_IDENTITY_POOL_ID is required');\n    }\n    session = await (0,_authAsCognitoUser_js__WEBPACK_IMPORTED_MODULE_0__.authAsCognitoUser)(process.env.PAYLOAD_CLOUD_PROJECT_ID, process.env.PAYLOAD_CLOUD_COGNITO_PASSWORD);\n    const cognitoIdentity = new _aws_sdk_client_cognito_identity__WEBPACK_IMPORTED_MODULE_1__.CognitoIdentityClient({\n        credentials: (0,_aws_sdk_credential_providers__WEBPACK_IMPORTED_MODULE_2__.fromCognitoIdentityPool)({\n            clientConfig: {\n                region: 'us-east-1'\n            },\n            identityPoolId: process.env.PAYLOAD_CLOUD_COGNITO_IDENTITY_POOL_ID,\n            logins: {\n                [`cognito-idp.us-east-1.amazonaws.com/${process.env.PAYLOAD_CLOUD_COGNITO_USER_POOL_ID}`]: session.getIdToken().getJwtToken()\n            }\n        })\n    });\n    const credentials = await cognitoIdentity.config.credentials();\n    // @ts-expect-error - Incorrect AWS types\n    identityID = credentials.identityId;\n    storageClient = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_3__.S3({\n        credentials,\n        region: process.env.PAYLOAD_CLOUD_BUCKET_REGION\n    });\n    return {\n        identityID,\n        storageClient\n    };\n};\n\n//# sourceMappingURL=getStorageClient.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrcGF5bG9hZC1jbG91ZEAzLjIzLjBfcGF5bG9hZEAzLjIzLjBfZ3JhcGhxbEAxNi4xMC4wX21vbmFjby1lZGl0b3JAMC41Mi4yX3JlYWN0LWRvX3BpbWl6MjNjemIyYXdtM3IyY3Q2b2hrYWh5L25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9wYXlsb2FkLWNsb3VkL2Rpc3QvdXRpbGl0aWVzL2dldFN0b3JhZ2VDbGllbnQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBeUU7QUFDL0I7QUFDOEI7QUFDYjtBQUMzRDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix3RUFBaUI7QUFDckMsZ0NBQWdDLG1GQUFxQjtBQUNyRCxxQkFBcUIsc0ZBQXVCO0FBQzVDO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLHdEQUF3RCwrQ0FBK0M7QUFDdkc7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixrREFBTTtBQUM5QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy90b3NoL0RvY3VtZW50cy9QbGF0Zm9ybUlPL1Byb2plY3RzL3N0cmFwaTUvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK3BheWxvYWQtY2xvdWRAMy4yMy4wX3BheWxvYWRAMy4yMy4wX2dyYXBocWxAMTYuMTAuMF9tb25hY28tZWRpdG9yQDAuNTIuMl9yZWFjdC1kb19waW1pejIzY3piMmF3bTNyMmN0Nm9oa2FoeS9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvcGF5bG9hZC1jbG91ZC9kaXN0L3V0aWxpdGllcy9nZXRTdG9yYWdlQ2xpZW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvZ25pdG9JZGVudGl0eUNsaWVudCB9IGZyb20gJ0Bhd3Mtc2RrL2NsaWVudC1jb2duaXRvLWlkZW50aXR5JztcbmltcG9ydCAqIGFzIEFXUyBmcm9tICdAYXdzLXNkay9jbGllbnQtczMnO1xuaW1wb3J0IHsgZnJvbUNvZ25pdG9JZGVudGl0eVBvb2wgfSBmcm9tICdAYXdzLXNkay9jcmVkZW50aWFsLXByb3ZpZGVycyc7XG5pbXBvcnQgeyBhdXRoQXNDb2duaXRvVXNlciB9IGZyb20gJy4vYXV0aEFzQ29nbml0b1VzZXIuanMnO1xubGV0IHN0b3JhZ2VDbGllbnQgPSBudWxsO1xubGV0IHNlc3Npb24gPSBudWxsO1xubGV0IGlkZW50aXR5SUQ7XG5leHBvcnQgY29uc3QgZ2V0U3RvcmFnZUNsaWVudCA9IGFzeW5jICgpPT57XG4gICAgaWYgKHN0b3JhZ2VDbGllbnQgJiYgc2Vzc2lvbj8uaXNWYWxpZCgpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZGVudGl0eUlELFxuICAgICAgICAgICAgc3RvcmFnZUNsaWVudFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoIXByb2Nlc3MuZW52LlBBWUxPQURfQ0xPVURfUFJPSkVDVF9JRCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BBWUxPQURfQ0xPVURfUFJPSkVDVF9JRCBpcyByZXF1aXJlZCcpO1xuICAgIH1cbiAgICBpZiAoIXByb2Nlc3MuZW52LlBBWUxPQURfQ0xPVURfQ09HTklUT19QQVNTV09SRCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BBWUxPQURfQ0xPVURfQ09HTklUT19QQVNTV09SRCBpcyByZXF1aXJlZCcpO1xuICAgIH1cbiAgICBpZiAoIXByb2Nlc3MuZW52LlBBWUxPQURfQ0xPVURfQ09HTklUT19JREVOVElUWV9QT09MX0lEKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUEFZTE9BRF9DTE9VRF9DT0dOSVRPX0lERU5USVRZX1BPT0xfSUQgaXMgcmVxdWlyZWQnKTtcbiAgICB9XG4gICAgc2Vzc2lvbiA9IGF3YWl0IGF1dGhBc0NvZ25pdG9Vc2VyKHByb2Nlc3MuZW52LlBBWUxPQURfQ0xPVURfUFJPSkVDVF9JRCwgcHJvY2Vzcy5lbnYuUEFZTE9BRF9DTE9VRF9DT0dOSVRPX1BBU1NXT1JEKTtcbiAgICBjb25zdCBjb2duaXRvSWRlbnRpdHkgPSBuZXcgQ29nbml0b0lkZW50aXR5Q2xpZW50KHtcbiAgICAgICAgY3JlZGVudGlhbHM6IGZyb21Db2duaXRvSWRlbnRpdHlQb29sKHtcbiAgICAgICAgICAgIGNsaWVudENvbmZpZzoge1xuICAgICAgICAgICAgICAgIHJlZ2lvbjogJ3VzLWVhc3QtMSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpZGVudGl0eVBvb2xJZDogcHJvY2Vzcy5lbnYuUEFZTE9BRF9DTE9VRF9DT0dOSVRPX0lERU5USVRZX1BPT0xfSUQsXG4gICAgICAgICAgICBsb2dpbnM6IHtcbiAgICAgICAgICAgICAgICBbYGNvZ25pdG8taWRwLnVzLWVhc3QtMS5hbWF6b25hd3MuY29tLyR7cHJvY2Vzcy5lbnYuUEFZTE9BRF9DTE9VRF9DT0dOSVRPX1VTRVJfUE9PTF9JRH1gXTogc2Vzc2lvbi5nZXRJZFRva2VuKCkuZ2V0Snd0VG9rZW4oKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0pO1xuICAgIGNvbnN0IGNyZWRlbnRpYWxzID0gYXdhaXQgY29nbml0b0lkZW50aXR5LmNvbmZpZy5jcmVkZW50aWFscygpO1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLSBJbmNvcnJlY3QgQVdTIHR5cGVzXG4gICAgaWRlbnRpdHlJRCA9IGNyZWRlbnRpYWxzLmlkZW50aXR5SWQ7XG4gICAgc3RvcmFnZUNsaWVudCA9IG5ldyBBV1MuUzMoe1xuICAgICAgICBjcmVkZW50aWFscyxcbiAgICAgICAgcmVnaW9uOiBwcm9jZXNzLmVudi5QQVlMT0FEX0NMT1VEX0JVQ0tFVF9SRUdJT05cbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgICBpZGVudGl0eUlELFxuICAgICAgICBzdG9yYWdlQ2xpZW50XG4gICAgfTtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldFN0b3JhZ2VDbGllbnQuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+payload-cloud@3.23.0_payload@3.23.0_graphql@16.10.0_monaco-editor@0.52.2_react-do_pimiz23czb2awm3r2ct6ohkahy/node_modules/@payloadcms/payload-cloud/dist/utilities/getStorageClient.js\n");

/***/ })

};
;